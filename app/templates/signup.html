{% extends "base.html" %}
{% block title %} Register {% endblock %}

{% set active_page = "signup" %}

{% block css %}
<link rel="stylesheet" href="../static/login.css">
<style>
  .alert {
    display: flex;
    align-items: center;
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid transparent;
    border-radius: 4px;
  }

  .alert-warning {
    color: #856404;
    background-color: #fff3cd;
    border-color: #ffeeba;
  }

  .alert svg {
    width: 20px;
    height: 20px;
    margin-right: 10px;
  }
</style>
{% endblock %}

{% block head %}{% endblock %}


{% block body %}
<svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="check-circle-fill" viewBox="0 0 16 16">
    <path
      d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z" />
  </symbol>
  <symbol id="info-fill" viewBox="0 0 16 16">
    <path
      d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z" />
  </symbol>
  <symbol id="exclamation-triangle-fill" viewBox="0 0 16 16">
    <path
      d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" />
  </symbol>
</svg>
<div id="login" class="center-container">
  <div class="container mt-5" height="100%">
    <div id="login" class="container-fluid">
      <form id="signup" class="form mx-auto" style="max-width: 400px" action="/signup" method="POST">
        <a href="/"><img src="../static/Logo.svg" alt="ClimaCloset" width="100" height="100" /></a>
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        {% if category == "green" %}
        <div class="alert alert-success" role="alert">
          <svg class="bi flex-shrink-0 me-2" role="img" aria-label="Success:">
            <use xlink:href="#check-circle-fill" />
          </svg>
          <div>
            {{ message | safe }}
          </div>
        </div>
        {% elif category == "blue" %}
        <div class="alert alert-primary" role="alert">
          <svg class="bi flex-shrink-0 me-2" role="img" aria-label="Info:">
            <use xlink:href="#info-fill" />
          </svg>
          <div>
            {{ message | safe }}
          </div>
          {% else %}
          <div class="alert alert-warning" role="alert">
            <svg class="bi flex-shrink-0 me-2" role="img" aria-label="Warning:">
              <use xlink:href="#exclamation-triangle-fill" />
            </svg>
            <div>
              {{ message | safe }}
            </div>
          </div>
          {% endif %}
          {% endfor %}
          {% endif %}
          {% endwith %}
          <!-- Name Field -->
          <div class="flex-column">
            <label for="name" class="form-label">Name</label>
          </div>
          <div class="inputForm">
            <input type="text" name="name" id="name" class="input" placeholder="Enter your name" autocomplete="off"
              required />
          </div>
          <!-- Email Field -->
          <div class="flex-column">
            <label for="email" class="form-label">Email</label>
          </div>
          <div class="inputForm">
            <input type="email" name="email" id="email" class="input" placeholder="Enter your email" autocomplete="off"
              required />
          </div>
          <!-- Password Field -->
          <div class="flex-column">
            <label for="password" class="form-label">Password</label>
          </div>
          <div class="inputForm">
            <input type="password" name="password" id="password" class="input" placeholder="Enter your password"
              required />
          </div>
          <!-- Password Confirmation Field -->
          <div class="flex-column">
            <label for="confirmation" class="form-label">Confirm Password</label>
          </div>
          <div class="inputForm">
            <input type="password" name="confirmation" id="confirmation" class="input"
              placeholder="Re-enter your password" required />
          </div>
          <!-- Signup Code Field -->
          <div class="flex-column">
            <label for="code" class="form-label muted">
              <a class="form-label" data-bs-toggle="tooltip"
                data-bs-title="We're still in beta. Ask us for an invite!">Invite Code</a>
            </label>
          </div>
          <div class="inputForm">
            <input type="text" name="code" id="code" class="input" placeholder="Enter your Invite Code"
              autocomplete="off" required />
          </div>
          <input type="hidden" name="prefill_email" id="prefill_email" value="{{ request.form.email }}">
          <!-- Submit Button -->
          <button type="submit" class="button-submit">Register</button>
          <p class="p">Already have an account? <a href="/login" class="span">Log In</a></p>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block js %}
<script>
  var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
  var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl)
  })
  const togglePassword =
    document.querySelector('#show');

  const password =
    document.querySelector('#password');

  togglePassword.
    addEventListener('click', function (e) {

      // Toggle the type attribute
      const type = password.getAttribute(
        'type') === 'password' ? 'text' : 'password';
      password.setAttribute('type', type);

      // Toggle the eye slash icon
      if (togglePassword.src.match(
        "https://media.geeksforgeeks.org/wp-content/uploads/20210917150049/eyeslash.png")) {
        togglePassword.src =
          "https://media.geeksforgeeks.org/wp-content/uploads/20210917145551/eye.png";
      } else {
        togglePassword.src =
          "https://media.geeksforgeeks.org/wp-content/uploads/20210917150049/eyeslash.png";
      }
    });
</script>
{% endblock %}